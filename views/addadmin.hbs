<script type="text/javascript">
  if (localStorage.token === 'undefined') {
    console.log('cliam : token not defined')
    window.location.replace("/login")
  }
</script>
  <script src="/plugins/matchHeight/jquery.matchHeight.js"></script>
<main class=" mdl-layout__content mdl-color--white">

  <div class="innercontent demo-upd .mdl-card__title mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop">
    <div>
      <h2 class="mainheader"> Add administrator</h2>
      <form id="myForm" action="/addUsers">
        <div class="form-group col-md-6">
          
          <label for="firstName">First name: </label>
          <input id="firstName" class="form-control" type="text" name="firstName">
        </div>
        <div class="form-group col-md-6">
          
          <label  for="lastName">Last name: </label>
          <input id="lastName"  class="form-control" type="text" name="lastName">
        </div>
        <div class="form-group col-md-6">
          <label for="mobile">Mobile</label>
          <input id="mobile"  class="form-control" type="text" name="mobile">
          
        </div>
        <div class="form-group col-md-6">
          <label for="email">Email</label>
          <input id="email"  class="form-control" type="email" name="email">
          
        </div>

        <div class="form-group col-md-6">
          <label for="password">Mot de passe</label>
          <input id="password"  class="form-control" type="password" name="password">
        </div>

        <input id="member" type="hidden" name="profile" value="administrator">
        {{!-- <input id="password" type="hidden" name="password" value="mdp123"> --}}
        <!-- <input id="externalId" type="hidden" name="externalId"> -->
        <input id="token" type="hidden" name="token" value="{{token}}">
        <button type="submit" name="button"> Ajouter</button>
      </form>
    </div>

    <!-- end new boxes -->

  </div>
  </main>
    <script>
      // <script src = "/plugins/matchHeight/jquery.matchHeight.js" >
    </script>
    <script>
    $('#extId').val('ext_' + guid())
    function guid() {
      function s4() {
        return Math.floor((1 + Math.random()) * 0x10000)
        .toString(16)
        .substring(1);
      }
      return s4() + s4() + '-' + s4() ;
    }
    $('#myForm').submit(function(e) {
      var url = "/api/signUp"
      $.ajax({
        url: url,
        method: 'POST',
        dataType: 'json',
        headers: {
          token: '{{token}}'
        },
        data: {
          firstName: $('#firstName').val(),
          lastName: $('#lastName').val(),
          email: $('#email').val(),
          profile: $('#member').val(),
          mobile: $('#mobile').val(),
          // externalId: 'ext_' + guid(),
          password: $('#password').val()
        }
      })
      .done(function(res){
        $('#firstName').val('')
        $('#lastName').val('')
        $('#email').val('')
        $('#member').val('')
        $('#mobile').val('')
        window.location.replace('/members/?token={{token}}')
      })
      e.preventDefault()
    })
      $(function() {
        $('.continfo').matchHeight();
        $('.documentsstate').matchHeight();
      });
    </script>

  
